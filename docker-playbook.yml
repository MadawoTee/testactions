---
- name: Install Docker and Run Container
  hosts: "{{ PRIVATE_IP }}"
  become: yes

  tasks:
    - name: Install SSM Agent
      shell: "wget https://s3.amazonaws.com/ec2-downloads-windows/SSMAgent/latest/debian_amd64/amazon-ssm-agent.deb && dpkg -i amazon-ssm-agent.deb && systemctl enable amazon-ssm-agent && systemctl start amazon-ssm-agent"


    - name: Install Docker
      apt:
        name: docker.io
        update_cache: yes

    - name: Start Docker Service
      service:
        name: docker
        state: started
        enabled: yes

    - name: Run Docker Container
      docker_container:
        name: my_container
        image: your_docker_image
        state: started
